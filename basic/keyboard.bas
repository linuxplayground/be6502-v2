10 CTL=$6000:DAT=$6001:RB=$6002:RA=$6003
20 POKE RA,$FF:POKE RB,$FF
30 RST=4:LA=7:WR=6
40 POKE CTL,0:POKE CTL,RST
100 REG=7:VAL=$3E:GOSUB 1000
110 REG=8:VAL=$0F:GOSUB 1000
200 REG=1:VAL=0:GOSUB 1000
300 GET K
310 IF K = 0 THEN GOTO 300
320 PRINT K
330 IF K = 81 THEN NT = $3B
331 IF K = 87 THEN NT = $38
332 IF K = 69 THEN NT = $35
333 IF K = 82 THEN NT = $32
334 IF K = 84 THEN NT = $2F
335 IF K = 89 THEN NT = $2C
336 IF K = 85 THEN NT = $2A
337 IF K = 73 THEN NT = $27
338 IF K = 79 THEN NT = $25
339 IF K = 80 THEN NT = $23
340 IF K = 91 THEN NT = $21
341 IF K = 27 THEN GOTO 850
350 REM
351 REG=8:VAL=16:GOSUB 1000
352 REG=9:VAL=15:GOSUB 1000
353 REG=10:VAL=15:GOSUB 1000
354 REG=12:VAL=15:GOSUB 1000
355 REG=13:VAL=0:GOSUB 1000
360 REG=0:VAL=NT:GOSUB 1000
365 REG=1:VAL=1:GOSUB 1000
370 GOTO 300
850 POKE CTL,0
999 END
1000 REM
1010 POKE CTL,LATCH
1020 POKE DAT,REG
1030 POKE CTL,RST
1040 POKE CTL,WRITE
1050 POKE DAT,VAL
1060 POKE CTL,RST
1080 RETURN